<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.pkgs.mapper.AnswerMapper">

    <resultMap id="resultMap" type="com.pkgs.entity.AnswerEntity">
        <id column="id" property="id" jdbcType="INTEGER"/>
        <result column="topic_id" property="topicId"/>
        <result column="question" property="question"/>
        <result column="question_id" property="questionId"/>
        <result column="answer_id" property="answerId"/>
        <result column="author" property="author"/>
        <result column="link" property="link"/>
        <result column="upvote_num" property="upvoteNum"/>
        <result column="comment_num" property="commentNum"/>
        <result column="summary" property="summary"/>
        <result column="create_at" property="createAt"/>
        <result column="update_at" property="updateAt"/>
        <result column="steal_at" property="stealAt"/>
    </resultMap>

    <sql id="fields">
        id,
        topic_id,
        question,
        question_id,
        answer_id,
        author,
        link,
        upvote_num,
        comment_num,
        summary,
        create_at,
        update_at,
        steal_at
    </sql>

    <sql id="querySql">
        <where>
            <if test="cm.topicId!=null and cm.topicId!=''">
                AND topic_id = #{cm.topicId}
            </if>
        </where>
    </sql>

    <select id="selectByMap" resultMap="resultMap" parameterType="java.util.Map">
        SELECT
        <include refid="fields"/>
        FROM
        top_answer_t
        <include refid="querySql"/>
        LIMIT 1
    </select>
</mapper>